<!--
 * @Author: [JokerChen]
 * @Date: 2020-04-09 11:41:50
 * @LastEditors: [JokerChen]
 * @LastEditTime: 2020-04-09 14:31:55
 * @Description: 
 -->

## <center> KDZN_P3 版本变更履历</center>

### V2.01.3版本

    - 修改部分BUG
    - 原生端增加下载数据和下载文件提示信息框

### V2.01.4版本

    - 系统增加人脸消费、访客登记功能模块

### V2.01.5版本

    - 门禁管理设备端人员管理模块增加下列功能
    - 添加人员、修改人员、删除人员、U盘导入档案、U盘导出档案
    - 增加按人员姓名简拼查询数据

### V2.01.6版本

    - 修改系统刚启动进行人脸识别后崩溃的BUG（人脸识别框范围超过摄像头画面导致）
    - 增加第一页、最后一页、总人数显示等功能，优化添加人员，删除人员、采集人脸后页面刷新
    - 采集人脸照片后实时上传并覆盖服务器人员照片
    - 增加识别度显示

### V2.01.7版本

    - 人脸消费增加份饭功能
    - 修改份饭模式下人脸消费余额不足后无法重新人脸识别问题
    - 修改水平镜像参数不生效及识别框文字翻转显示的BUG
    - 优化人员管理翻页
    - 增加考勤系统、宿舍系统
    - 消费系统增加底边状态栏及消费机号显示

### V2.01.8版本

    - 增大采集人脸时生成照片的拍照区域
    - 更换密码登录样式
    - 提高按键连续点击响应速度
    - 通道门禁增加三秒内不重复识别判断

### V2.01.9版本

    - 消费管理增加刷卡加人脸识别方式
    - 增加识别距离参数档位
    - 与消费机通讯由韦根信号输出改成串口通讯，接收消费机命令也由TCP/IP方式改成串口通讯方式，从而摆脱网络限制实现脱机消费功能。

### V2.02.1版本

    - 人脸消费增加独立份饭功能，直接调用WebService接口与后台通讯，无需与消费机联动。
    - 增加人证比对门禁终端，基本实现离线工作模式下正常运行。

### V2.02.2版本

    - 完善优化人证比对门禁终端功能。
    - 修改部分新增功能产生的BUG。
    - 基础设置增加人脸识别方向设置。
    - 消费系统增加支付是否确认设置。
    - 消费系统增加单独人员下载便于采集新增人员人脸特征值。
    - 更换人证比对门禁终端界面。
    - 增加人证比对门禁终端在线工作模式。

### V2.02.3版本

    - 考勤签到和宿舍签到增加添加人员、修改人员等功能。
    - 修复原生端连续读取本地数据库异常退出问题。
    - 增加人脸识别超过设定时长报警功能。
    - 人证合一终端增加调用身份证验证接口及相关设置项。

### V2.02.4版本

    - 增加人脸识别测试页面。
    - 解决考勤下载首页新闻数据有时下不全的问题。
    - 增加识别人脸时是否上传拍照和采集人脸时是否上传拍照设置及相关操作流程。

### V2.02.5版本

    - 修改部分照片显示不正常的BUG。
    - 增加部分功能的语音提示。
    - 修复消费系统连续刷脸消费时第二次无法识别的问题。
    - 优化消费系统的消费流程，增加几种特殊情况下的语音提示及处理流程。
    - 更换考勤签到接口，不办卡也可考勤。

### V2.02.6版本

    - 更换门禁管理终端新样式。
    - 修复消费系统BUG。

### V2.02.7版本

    - 增加车载横版样式。
    - 完善车载终端功能。

### V2.02.8版本

    - 修改P3人脸加载启动方式以及参数赋值方式，解决系统启动时人脸不加载问题。
    - 删除部分无用函数。

### V2.02.9版本

    - 优化下载，支持大数据下载。
    - 修复部分人脸识别慢的BUG。

### V2.03.1版本

    - 优化大数据下载，修复BUG。
    - 增加下载数据百分比显示。

### V2.03.2版本

    - 优化下载，修复BUG。
    - 增加竖版宿舍签到模块。
    - 门禁终端卡加脸模式下增加如果本地无档案，通过刷卡在线获取服务器档案功能。

### V2.03.3版本

    - 动态加载人脸SDK。
    - 下载文件兼容安卓7.1系统。

### V2.03.4版本

    - 增加人脸识别2.1商用版本应用。
    - 人脸识别注册码增加扫码识别。
    - 单独使用时增加消费机显示命令。

### V2.03.5版本

    - 下载文件改成多文件夹保存，避免大数据量下载时安卓系统文件夹内文件数量的限制。
    - 优化人脸识别速度。

### V2.03.6版本

    - 增加设备应用设置项。
    - 增加文件下载纠错处理。
    - 优化人脸识别速度。
    - 完善横版人脸消费系统。

### V2.03.7版本

    - 增加抓拍照片方向设置。
    - 增加文件下载纠错处理。
    - 增加数据变更实时同步功能及设置项。
    - 完善横版人脸消费系统。

### V2.03.8版本

    - observeOn(Schedulers.newThread())

### V2.03.9版本

    - 门禁和人证合一系统增加设备名称显示。
    - 消费系统人脸识别时增加余额显示。
    - 修复部分BUG，优化界面。

### V2.04.1版本

    - 修改宿舍在寝状态查询接口。
    - 增加会议签到模块。
    - 横版消费增加计算器消费模式。

### V2.04.2版本

    - 增加订餐管理系统。
    - 增加人脸注册序列号自动上传及手动下载，上传地址www.55kad.com

### V2.04.3版本

    - 消费系统增加刷卡或人脸消费模式和只刷卡消费模式。
    - 消费系统增加判断，如果本地没有人员照片，识别成功后上传抓拍照片当人员照片。
    - 增加人脸识别弹出提示设置项。

### V2.04.4版本

    - 增加消费汇总报表和消费明细报表及Excel导出功能。
    - 消费竖版增加新样式支持计算器模式。
    - 第三方应用登录及设置。
    - 修复扫描二维码特殊情况下不显示的BUG。

### V2.04.5版本

    - 消费终端计算器模式下小键盘增加ESC功能键功能。
    - 消费数据查询增加已上传和未上传数据的汇总及明细。
    - 整合人员信息管理、系统参数设置、添加人员、修改人员等模块样式。
    - 修改人脸识别方向无需重启系统。

### V2.04.6版本

    - 消费终端增加餐别的用餐时间、消费模式、份饭金额的设置。
    - 脱机情况下增加特殊处理机制，可以手动设置用餐信息进行脱机消费。
    - 增加是否接收同步人员设置项。
    - 考勤增加全部人员下载选项。

### V2.04.7版本

    - 修改第三方应用样式，增加动态菜单。
    - 第三方应用增加是否启用登录设置项及相关功能。
    - 宿舍签到终端增加设备刷新时间设置项及相关功能。
    - 人脸识别增加识别清空时长设置项及相关功能。
    - 消费系统计算器模式下点击第二次确认按钮时确认支付。

### V2.04.8版本

    - 电子门牌终端单人、双人、多人模块。
    - 人证合一增加身份证信息显示设置项及相关功能。
    - 消费终端修改在线获取人员余额接口，增加获取实际消费金额。

### V2.04.9版本

    - 增加触控清空时长设置及相关功能。
    - 更换新版虹软人脸识别SDK，提高识别速度。
    - 增加竖版会议签到。
    - 各终端不同分辨率样式适配。

### V2.05.1版本

    - 修复安卓7.1版本下载数据卡住BUG。
    - 电子门牌样式修改。

### V2.05.2版本

    - 修复消费调用后台接口卡住BUG，增加超时处理。
    - 增加人脸注册码上传本地服务器功能。
    - 增加自动下载已注册设备的人脸注册码功能。

### V2.05.3版本

    - 增加转换人脸时是否上传特征值选项及相关功能。
    - 修改样式自适应不同分辨率设备场景。
    - 增加人脸识别是否全屏设置项及相关功能，用于适配竖版摄像头设备。
    - 人脸SDK算法更新到2.2版本。
    - 增加抓拍照片是否旋转设置项及相关功能。

### V2.05.4版本

    - 增加人证合一增量人员档案接口。
    - 调整人证上传数据接口与门禁管理统一，修改上传数据接口，支持照片在其他设备实时显示。
    - 修复人证合一部分BUG。

### V2.05.5版本

    - 消费终端修改消费处理接口将账号和卡号分开处理。
    - 人证终端增加是否使用人证比对设置项及相关功能。
    - 下载人脸注册码时增加密码确认。
    - 修复部分机型监测U盘加载失败BUG。
    - 修复安卓7.1版本下在线升级安装失败BUG。

### V2.05.6版本

    - 增加脱机是否启动离线判断设置项及相关功能。
    - 门禁终端在线工作模式下如果断网自动切换到离线模式工作。
    - 门禁终端增加脱机数据连网后自动上传和手动上传。
    - 修复宿舍管理终端使用权限下载后人员不识别的BUG。

### V2.05.7版本

    - 程序自适应适配第二次购买的200个激活码。
    - 门禁增加应急处理流程，根据到离校时段和人员身份判断是否允许进出。
    - 终端定时器增加内存释放命令及时释放内存防止内存溢出。
    - 优化访客登记流程，重写部分接口。

### V2.05.8版本

    - 消费终端界面增加消费查询连接按钮。
    - 修复转换人脸上传特征值崩溃的BUG。
    - 人员下载增加人员身份字段。
    - 脱机消费增加根据人员身份限次和限额判断。
    - 门禁终端增加禁止重复识别时长设置及相关功能。

### V2.05.9版本

    - 兼容新访客设备身份证读卡器接口。
    - 修复部分原生端BUG。
    - 适配新访客设备样式。
    - 宿舍管理增加按人员身份开门。
    - 人证终端增加扫码开门同步进出次数功能。
    - 修复部分原生端BUG。

### V2.06.1版本

    - 增加5寸屏和8寸屏设备初始默认设置。
    - 适配5寸屏和8寸屏设备样式。
    - 修复初始化设备不生效的BUG。
    - 访客增加图片清缓存处理。

### V2.06.2版本

    - 修改消费接口，调用新增加的消费接口，使用JSON格式进行数据交互，需升级后台。
    - 离线消费兼容按营业组限次接口。

### V2.06.3版本

    - 实时下载人员增加并发排队逻辑，保证在实时下载人员的时候设备在不当误识别。

### V2.06.4版本

    - 与宝石消费机联动识别消费（份饭模式和计算器模式）。
    - 数据查询改成异步方式，防止在主线程频繁操作数据库导致程序崩溃。
    - 修复消费样式设置不生效的BUG。

### V2.06.5版本

    - 增加X5内核，增强稳定性。
    - 修复小键盘回车键失效BUG。

### V2.06.6版本

    - 增加关闭LED灯时段设置及相关功能。
    - 门禁终端增加第三方设备开关设置及相关功能。
    - 增加与宝石消费机通讯命令。

### V2.06.7版本

    - 多人脸识别开关设置。
    - 增加活体检测阈值。
    - 优化人脸识别，修复长时间识别系统卡死的BUG。
    - 修改人脸识别逻辑，修复人脸识别漏洞。

### V2.06.8版本

    - 版本号增加内核符号显示。
    - 修复人脸识别BUG。
    - 优化人脸识别，修复部分导致系统崩溃的BUG。

### V2.06.9版本

    - 增加门禁设备设置项的下发和上传功能。
    - 增加门禁、LED灯、黑板的设置常开/常闭命令。
    - 修复设备重启后常开/常闭命令失效的BUG。

### V2.07.1版本

    - 增加带时长的常开命令。
    - 增加门禁开门时长设置项及相关流程。
    - 增加作为第三方识别设备设置项及相关接口。

### V2.07.2版本

    - 增加刷卡下载对应人员增量档案功能。
    - 修复下载增量档案后人脸不识别的问题。
    - 人员信息增加副卡字段，用于区分主副卡。

### V2.07.3版本

    - 修复门禁终端脱机数据上传时的BUG。
    - 解决轮巡计时器重复加载的BUG。
    - 门禁终端增加刷卡是否下载档案设置项及相关流程。
    - 解决非主进程下不弹出提示框。
    - 解决访客登记终端身份证照片读取不成功的BUG。

### V2.07.4版本

    - 自助访客终端修改登记页面样式。
    - 原生增加错误日志监测并上传模块。
    - 增加屏保视频播放模块及相关功能。
    - 门禁终端修改离线数据上传接口。

### V2.07.5版本

    - 宿舍终端修改样式，增加寝室数量自适应显示。
    - 门禁终端和消费终端增加增量档案下载设置项及相关功能。
    - 新建线程用于人脸识别。

### V2.07.6版本

    - 屏保视频默认音量为0，支持上滑和下滑调整音量。
    - 增加门禁图片通知功能。
    - 修改宿舍样式。
    - 重做会议签到横竖版样式。

### V2.07.7版本（测试人脸SDK3.0，未应用）

### V2.07.8（人脸SDK2.2最终版）版本

    - 消费终端消费接口增加消费时间字段，确保本机消费时间与服务端时间一致。
    - 消费终端增加硬件二维码消费模块。
    - 修复同步数据与采集人脸冲突的BUG。
    - 修复重复采集人脸不生效的BUG。

### V3.01.1版本

    - 人脸识别算法更新到3.0

### V3.01.2版本

    - 消费终端消费接口增加消费时间字段，确保本机消费时间与服务端时间一致。
    - 消费终端增加硬件二维码消费模块。
    - 新增一汽访客终端。

### V3.01.3版本

    - 门禁终端新增位置导航示意图模块。
    - 修复人脸3.0采集特征值失败的BUG。
    - 修复计时器内计数器不累加的BUG。
    - 人脸转换增加文件大小判断，超过1兆不转换。
    - 通讯控制台增加注册人脸SDK接口。

### V3.01.4版本

    - 重写原生端人脸识别算法提高识别速度。
    - 优化人脸识别算法。
    - 修复同步数据与采集人脸冲突的BUG。
    - 修复重复采集人脸不生效的BUG。
    - 门禁终端增加导航按钮开关设置及相关功能。

### V3.01.5版本

    - 根据识别头像比例重写识别距离设置项相关功能。
    - 优化双目设备人脸识别算法。
    - 增加双面屏设备人脸消费样式。
    - 门禁终端离线判断增加根据人员、身份、时段等权限判断进出及相关权限信息的下载接口。
    - 变更访客管理终端上传访客照片接口，适配第三方厂家设备。

### V3.01.6版本

    - 会议签到增加开门功能。
    - 下载增量权限的同时也增量下载人员档案。
    - 适配多种设备的读卡、扫码、双目识别等模块。
    - 新增横版车载终端，支持按身份消费。

### V3.01.7版本

    - 增加车载、门禁、考勤等终端的数据查询及导出Excel文件。
    - 修改人脸识别距离设置函数，增加参数适配设备。
    - 修复人脸激活失败后采集人脸有视频画面的BUG。
    - 重写人脸识别摄像头画面大小，增加分辨率、是否缩放等参数设置，避免摄像头画面比例变形问题。

### V3.01.8版本

    - 修改考勤竖版样式。
    - 增加门禁竖版样式。
    - 门禁终端增加绿灯、红灯等场景应用。
    - 修复8寸吉为设备不能静默安装的问题。
    - 修复部分样式下密码框弹出时管理员选择框背景色不透明的问题。

### V3.01.9版本

    - 修复车载终端串口不能连续读卡问题。
    - 修复车载终端读语音缺字问题。
    - 修复车载终端不能写入U盘问题。
    - 修复下载接口不兼容问题。
    - 门禁终端增加扫码接口。

### V3.02.1版本

    - 修复扫码回调函数参数不匹配的BUG。
    - 修改门禁终端和考勤终端的LED指示。
    - 添加单机版访客终端。
    - 添加日照钢铁访客终端。
    - 修改车载BUG。

### V3.02.2版本

    - 基础设置增加温感模块测试页面。
    - 门禁终端增加温感调整值和温感告警值设置项及相关功能。
    - 门禁终端增加体温显示及相关开门流程。
    - 门禁终端适配吉为测温模块。

### V3.02.3版本

    - 门禁终端优化测温流程。
    - 解决吉为设备打开串口导致程序死机的BUG。
    - 门禁终端适配型号3测温模块。
    - 门禁终端增加口罩验证和陌生人模式。

### V3.02.4版本

    - 门禁终端适配新型号1测温模块。
    - 门禁终端优化测温模块。
    - 增加温控识别区域显示及相关设置项。
    - 门禁终端适配新型号4测温模块。
    - 修改型号4测温模块温度获取机制。

### V3.02.5版本

    - 修复大量导致系统崩溃的BUG。
    - 门禁终端全屏模式增加温度显示及相关设置项。
    - 修复吉为设备开活体崩溃的BUG。
    - 优化初始参数设置。

### V3.02.6版本

    - 增加默认摄像头设置，应对人脸识别摄像头显示黑白的问题。
    - 门禁终端全屏设置项自动设置相关弹出设置。
    - 更换身份证识别新架包以适应安卓新版本操作系统。
    - 人证合一增加温度识别功能。
    - 修复抓拍照片图片内容错误的BUG。
    - 型号4测温模块温度算法改成去掉最大值后取4个温度算平均值。

### V3.02.7版本

    - 增加温感器接收延时设置项及相关功能。
    - 优化测温流程。
    - 修复黑白摄像头不适配分辨率导致活体识别失败的BUG。
    - 修复未设置温控模块识别成功后不开门的BUG。
    - 重新适配各页面样式，横竖版样式文件分开，避免横竖版样式冲突。

### V3.02.8版本

    - 修改回收测温数据流程。
    - 增加等待测温的效果及结果样式。
    - 修复在不显示识别框的时候就开始人脸识别及测温的BUG。
    - 修复口罩模式不生效的BUG。

### V3.02.9版本

    - 增加陌生人检测时长参数设置项及相关功能。
    - 开启验证陌生人模式，识别陌生人后中断人脸识别成功及失败告警回调。
    - 开启验证口罩模式，识别陌生人后中断人脸识别成功及失败告警回调。
    - 增加人脸离开回调，避免出现测温提示框后不消失的现象。

### V3.03.1版本

    - 修改高级设置样式，改成分类显示。
    - 增加新身份证模块架包。
    - 门禁终端增加人证核验功能。
    - 门禁终端增加温度数据。

### V3.03.2版本

    - 终端增加第三方接口调用。
    - 增加新温感模块（IIC模式）。
    - 增加英文版配置。

### V3.03.3版本

    - 完善英文版页面。
    - 增加华氏度显示的设置项及相关功能。
    - 增加英文数字语音播报。

### V3.03.4版本

    - 根据不同型号设备修改温感默认参数。
    - 增加未带口罩是否允许通行设置项及相关功能。
    - 增加进出状态设置项及相关功能。
    - 富迪访客个性化修改。
    - 心跳接口变更成通用API接口，做为后期对外共通接口使用。

### V3.03.5版本

    - 合并人员数据表，将消费、门禁、人证应用统一使用PersonInfo作为人员表。
    - 人员表增加副卡字段。
    - 增加温感器自动检测匹配。
    - 增加第三方通用API接口调用（上传识别数据、上传识别照片、上传采集照片）。

### V3.03.6版本

    - 更换虹软最新架包，提高戴口罩识别率。
    - 修改加载架包逻辑，提高人脸打开摄像头速度。
    - 自动检测增加判断，只在第一次安装时检测。
    - 增加温感器手动检测匹配。

### V3.03.7版本

    - 优化人脸识别、活体检测、口罩检测、戴口罩进门逻辑。
    - 增加人证校验人脸识别阀值设置项及相关功能。
    - 修复启动页背景显示温感器检测匹配窗口的BUG。
    - 增加通用API接口调用（下载全部人员档案、下载增量人员档案）。

### V3.03.8版本

    - 修复连续识别时不抓拍照片的BUG。
    - 优化温度获取算法，取最接近36.5的数值。
    - 修改单机版访客身份证有效期样式。
    - 除门禁管理应用外默认关闭陌生人模式及不显示测温区域。

### V3.03.9版本

    - 修复身份证读卡导致设备卡顿的BUG。
    - 访客机身份证读卡器改成不连读模式。
    - 人脸采集窗口修改成自动适配分辨率。
    - 完善通用API接口，增加参数设置，上传数据增加进出状态、相识度。
    - 所有通用API接口参数增加UUID及序列号。

### V3.04.1版本

    - 修改了由于动态库拷贝不全导致闪退问题。
    - 修改了8寸屏双目活体检测问题。

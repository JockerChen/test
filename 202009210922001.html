<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>今日来访</title>
  <link rel="stylesheet" href="css/visitingtoday.css">
</head>

<body>
  <div class="index-content">
    <div class="head-box">
      <div class="logo">
        <img src="img/nav_logo.png" />
        <p>今日来访</p>
      </div>
      <div class="head-box-right" id="ReturnBack">
        <i class="return-btn"></i>
        <span>返回</span>
      </div>
    </div>
    <div class="main-content">
      <div class="fill-box">
        <ul class="passage-list" id="GetOnePCPassingList">
          <li>
            <div class="passage-list-head">
              <p class="passage-name">通道1</p>
              <div class="passage-set-btn" data-DeviceNo="11">
                <div class="passage-set-option">
                  <div class="fill-box">
                    <p class="active" data-identityNo='20' data-identityName='老师' data-isPassingPermission='0'><span class="select-btn"><i></i></span>老师</p>
                    <p data-identityNo='21' data-identityName='家长' data-isPassingPermission='0'><span class="select-btn"><i></i></span>家长</p>
                    <p data-identityNo='22' data-identityName='学生' data-isPassingPermission='0'><span class="select-btn"><i></i></span>学生</p>
                    <p data-identityNo='23' data-identityName='住宿' data-isPassingPermission='0'><span class="select-btn"><i></i></span>住宿</p>
                  </div>
                  <div class="set-option-btn setPCPassingBtn">设置</div>
                </div>
              </div>
            </div>
            <div class="passage-set-list">
              <p><span>老师</span><span>学生</span><span>住宿</span><span>职工</span><span>家长</span></p>
            </div>
            <div class="person-list">
              <em class="line-top"></em>
              <em class="line-bottom"></em>
              <div class="fill-box">
                <p><span><i class="red"></i>韩磊</span><strong class="teacher-bg">老师</strong></p>
                <p><span><i class="yellow"></i>韩磊</span><strong class="student-bg">学生</strong></p>
                <p><span><i class="green"></i>韩磊</span><strong class="student-bg">学生</strong></p>
              </div>
            </div>
          </li>
          <li>
            <div class="passage-list-head">
              <p class="passage-name">通道1</p>
              <div class="passage-set-btn"></div>
            </div>
            <div class="passage-set-list">
              <p><span>老师</span><span>学生</span><span>住宿</span><span>职工</span><span>家长</span></p>
            </div>
            <div class="person-list">
              <em class="line-top"></em>
              <em class="line-bottom"></em>
              <div class="fill-box">
                <p><span><i class="red"></i>韩磊</span><strong class="teacher-bg">老师</strong></p>
                <p><span><i class="yellow"></i>韩磊</span><strong class="student-bg">学生</strong></p>
                <p><span><i class="green"></i>韩磊</span><strong class="student-bg">学生</strong></p>
              </div>
            </div>
          </li>
          <li>
            <div class="passage-list-head">
              <p class="passage-name">通道1</p>
              <div class="passage-set-btn"></div>
            </div>
            <div class="passage-set-list">
              <p><span>老师</span><span>学生</span><span>住宿</span><span>职工</span><span>家长</span></p>
            </div>
            <div class="person-list">
              <em class="line-top"></em>
              <em class="line-bottom"></em>
              <div class="fill-box">
                <p><span><i class="red"></i>韩磊</span><strong class="teacher-bg">老师</strong></p>
                <p><span><i class="yellow"></i>韩磊</span><strong class="student-bg">学生</strong></p>
                <p><span><i class="green"></i>韩磊</span><strong class="student-bg">学生</strong></p>
              </div>
            </div>
          </li>
          <li>
            <div class="passage-list-head">
              <p class="passage-name">通道1</p>
              <div class="passage-set-btn"></div>
            </div>
            <div class="passage-set-list">
              <p><span>老师</span><span>学生</span><span>住宿</span><span>职工</span><span>家长</span></p>
            </div>
            <div class="person-list">
              <em class="line-top"></em>
              <em class="line-bottom"></em>
              <div class="fill-box">
                <p><span><i class="red"></i>韩磊</span><strong class="teacher-bg">老师</strong></p>
                <p><span><i class="yellow"></i>韩磊</span><strong class="student-bg">学生</strong></p>
                <p><span><i class="green"></i>韩磊</span><strong class="student-bg">学生</strong></p>
              </div>
            </div>
          </li>
          <li>
            <div class="passage-list-head">
              <p class="passage-name">通道1</p>
              <div class="passage-set-btn"></div>
            </div>
            <div class="passage-set-list">
              <p><span>老师</span><span>学生</span><span>住宿</span><span>职工</span><span>家长</span></p>
            </div>
            <div class="person-list">
              <em class="line-top"></em>
              <em class="line-bottom"></em>
              <div class="fill-box">
                <p><span><i class="red"></i>韩磊</span><strong class="teacher-bg">老师</strong></p>
                <p><span><i class="yellow"></i>韩磊</span><strong class="student-bg">学生</strong></p>
                <p><span><i class="green"></i>韩磊</span><strong class="student-bg">学生</strong></p>
              </div>
            </div>
          </li>
        </ul>
        <div class="foot-box">
          <ul class="type-tips">
            <li class="red"><i></i>异常警报</li>
            <li class="yellow"><i></i>出校</li>
            <li class="green"><i></i>入校</li>
          </ul>
          <div class="use-info-box">
            <em></em>
            <div class="use-info">
              <p class="use-info-title">*使用说明</p>
              <ul class="use-info-list">
                <li>1. 点击按钮,可进行一次手工开闸</li>
                <li>2. 紧急情况下,可点此命令按钮</li>
              </ul>
            </div>
          </div>
          <ul class="btns-box">
            <li>
              <div class="orange">按钮1</div>
              <div class="green">按钮3</div>
            </li>
            <li>
              <div class="red">按钮2</div>
              <div class="blue">按钮4</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- 监控弹窗 -->
    <div class="monitoring-pop">
      <div class="zzc"></div>
      <div class="monitoring-content">
        <p class="monitoring-content-title">监控画面</p>
        <div class="monitoring-screen">
          <!-- 监控画面 -->
        </div>
      </div>
    </div>
  </div>
</body>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.7.2.min.js"></script>
<!--<script type="text/javascript" charset="utf-8" src="js/config.js"></script>-->
<!--<script type="text/javascript" charset="utf-8" src="js/downloaddata.js"></script>-->

</html>
<script>
  $(function () {
    $('#GetOnePCPassingList').on('click', '.passage-set-btn', function (event) {
      event.preventDefault(); // 阻止浏览器默认事件，重要
      console.log("设置按钮预备开启点击了");
      //显示设置可通信权限
      $(this).children('.passage-set-option').show();
    })
   //进行选中权限
    $('#GetOnePCPassingList').on('click', '.select-btn', function (event) {
      event.preventDefault(); // 阻止浏览器默认事件，重要
      console.log("设置按钮预备关闭点击了select-btn");
      //显示设置可通信权限
      $(this).parents('p').toggleClass("active");
    })
    //设置（对应的设备号和权限)
    $('.setPCPassingBtn').on('click', function (event) {

      var dataIdentityArray  =[];
      event.preventDefault(); // 阻止浏览器默认事件，重要
      event.stopPropagation();
      console.log("设置按钮预备关闭点击了");
      console.log($(this).closest(".passage-set-option").html());
      var sDeviceNo=$(this).parents('.passage-set-btn').attr("data-DeviceNo");
      $(this).closest(".passage-set-option").hide();
      console.log($(this).prev().html());
      for(var i=0;i<$(this).prev().children('p').length;i++){
          var data={};
          console.log($(this).prev().children().eq(i).attr('data-identityNo'));
          console.log($(this).prev().children().eq(i));
          data.identityNo=$(this).prev().children().eq(i).attr('data-identityNo');
          data.identityName=$(this).prev().children().eq(i).attr('data-identityName');
          data.isPassingPermission=$(this).prev().children('p').eq(i).attr('data-isPassingPermission');
          dataIdentityArray.push(data);
      }
      console.log(sDeviceNo);
      console.log(dataIdentityArray);
    })
  })



</script>